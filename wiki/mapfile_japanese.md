# [리눅스] Bash mapfile 사용법

## 概要
`mapfile` コマンドは、標準入力から読み取った行を配列に格納するための Bash の組み込みコマンドです。主にファイルやコマンドの出力を行単位で配列に保存したい場合に使用されます。これにより、後で配列の要素にアクセスして処理を行うことが容易になります。

## 使用法
基本的な構文は以下の通りです。

```bash
mapfile [オプション] 配列名
```

### 一般的なオプション
- `-n NUM` : 読み込む行数を指定します。NUM 行だけを配列に格納します。
- `-t` : 行末の改行を削除します。これにより、配列の各要素が改行なしで格納されます。
- `-O NUM` : 配列の開始インデックスを指定します。デフォルトは 0 です。

## 例
### 例1: ファイルからの読み込み
以下のコマンドは、`file.txt` というファイルの各行を `lines` という配列に格納します。

```bash
mapfile lines < file.txt
```

この後、`lines` 配列の各要素にアクセスすることができます。

### 例2: コマンドの出力を配列に格納
次のコマンドは、`ls` コマンドの出力を `files` という配列に格納します。

```bash
mapfile files < <(ls)
```

これにより、`files` 配列にはディレクトリ内のファイル名が格納されます。

## ヒント
- `mapfile` を使用する際は、配列のサイズに注意してください。非常に大きなファイルを読み込むと、メモリを大量に消費する可能性があります。
- `-t` オプションを使用することで、配列の要素に余分な改行が含まれないようにすることができます。これは、後でデータを処理する際に便利です。
- 配列の要素にアクセスする際は、`${配列名[インデックス]}` の形式でアクセスできます。例えば、最初の要素は `${lines[0]}` で取得できます。