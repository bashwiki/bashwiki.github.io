# [리눅스] Bash mapfile 사용법

## نظرة عامة
يستخدم الأمر `mapfile` في Bash لقراءة محتويات ملف نصي وتخزين كل سطر في عنصر منفصل من مصفوفة. هذا الأمر مفيد بشكل خاص عند التعامل مع البيانات من الملفات، حيث يمكن للمستخدمين معالجة البيانات بشكل أكثر كفاءة باستخدام المصفوفات.

## الاستخدام
التركيب الأساسي للأمر `mapfile` هو كما يلي:

```bash
mapfile [خيارات] [اسم_المصفوفة]
```

### الخيارات الشائعة:
- `-t`: يقوم بإزالة أحرف جديدة في نهاية كل سطر عند قراءة البيانات.
- `-n عدد`: يحدد عدد الأسطر التي سيتم قراءتها من الملف.
- `-O عدد`: يحدد الفهرس الذي يجب أن تبدأ منه المصفوفة.

## أمثلة
### المثال 1: قراءة ملف نصي إلى مصفوفة
لنفترض أن لديك ملف نصي يسمى `data.txt` يحتوي على عدة أسطر. يمكنك استخدام الأمر `mapfile` لقراءة هذا الملف إلى مصفوفة كما يلي:

```bash
mapfile -t my_array < data.txt
```

بعد تنفيذ هذا الأمر، ستحتوي المصفوفة `my_array` على كل سطر من الملف `data.txt` كعنصر منفصل.

### المثال 2: قراءة عدد محدد من الأسطر
إذا كنت ترغب في قراءة أول 3 أسطر فقط من الملف، يمكنك استخدام الخيار `-n` كما يلي:

```bash
mapfile -t -n 3 my_array < data.txt
```

ستحتوي المصفوفة `my_array` الآن على أول 3 أسطر من `data.txt`.

## نصائح
- تأكد من استخدام الخيار `-t` إذا كنت لا ترغب في أن تحتوي عناصر المصفوفة على أحرف جديدة في نهاية السطور.
- يمكنك استخدام `printf` لطباعة محتويات المصفوفة بعد القراءة، مثل:

```bash
printf "%s\n" "${my_array[@]}"
```

- استخدم `mapfile` مع أنابيب الأوامر لقراءة المخرجات مباشرة من الأوامر الأخرى، مثل:

```bash
mapfile -t my_array < <(ls -1)
```

بهذه الطريقة، يمكنك استخدام `mapfile` بشكل فعال لقراءة البيانات ومعالجتها في Bash.