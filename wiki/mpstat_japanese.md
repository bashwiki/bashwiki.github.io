# [리눅스] Bash mpstat 사용법

## 概要
`mpstat` コマンドは、システムの CPU 使用状況を監視するためのツールです。このコマンドは、各 CPU コアの使用率やアイドル時間、待機時間などの情報を提供します。主に、マルチプロセッサシステムにおいて、CPU のパフォーマンスを分析し、ボトルネックを特定するために使用されます。

## 使用法
`mpstat` コマンドの基本的な構文は次のとおりです。

```bash
mpstat [オプション] [間隔] [回数]
```

### 主なオプション
- `-P ALL` : すべての CPU コアの統計情報を表示します。
- `-u` : CPU の使用率を表示します（デフォルトで表示されます）。
- `-h` : 出力を人間が読みやすい形式で表示します。
- `間隔` : データを収集する間隔（秒）を指定します。
- `回数` : データを収集する回数を指定します。

## 例
以下は、`mpstat` コマンドの実用的な例です。

### 例 1: 全 CPU の使用率を表示
全ての CPU コアの使用率を表示するには、次のコマンドを実行します。

```bash
mpstat -P ALL 1 5
```
このコマンドは、1 秒ごとに全 CPU の使用率を 5 回表示します。

### 例 2: CPU 使用率を人間が読みやすい形式で表示
人間が読みやすい形式で CPU 使用率を表示するには、次のコマンドを使用します。

```bash
mpstat -h 2 3
```
このコマンドは、2 秒ごとに CPU 使用率を 3 回表示します。

## ヒント
- `mpstat` コマンドは、システムのパフォーマンスを監視するための重要なツールです。定期的に使用することで、CPU のボトルネックを特定し、システムの最適化に役立てることができます。
- 複数のコアを持つシステムでは、`-P ALL` オプションを使用して、各コアのパフォーマンスを個別に分析することが重要です。
- 結果をファイルにリダイレクトすることで、後で分析するためのデータを保存することができます。例えば、次のようにします。

```bash
mpstat -P ALL 1 5 > cpu_usage.txt
```

このようにして、`mpstat` コマンドを活用し、システムの CPU 使用状況を効果的に監視しましょう。