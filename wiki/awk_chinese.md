# [리눅스] Bash awk 사용법

## 概述
`awk` 是一个强大的文本处理工具，主要用于模式匹配和数据提取。它可以在文件或标准输入中逐行读取文本，并根据指定的模式和动作进行处理。`awk` 特别适合处理结构化数据，如 CSV 文件或以空格、制表符分隔的文本。

## 用法
`awk` 的基本语法如下：
```bash
awk 'pattern { action }' input_file
```
- `pattern`：用于匹配输入行的条件，可以是正则表达式或特定的字段条件。
- `action`：在匹配到的行上执行的操作，通常是打印、修改或计算。
- `input_file`：要处理的输入文件。如果省略，`awk` 将从标准输入读取数据。

### 常用选项
- `-F`：指定字段分隔符。例如，`-F,` 用于以逗号分隔的文件。
- `-v`：定义变量。例如，`-v var=value` 可以在 `awk` 脚本中使用变量。

## 示例
### 示例 1：打印特定字段
假设有一个名为 `data.txt` 的文件，内容如下：
```
Alice 30
Bob 25
Charlie 35
```
要打印每个人的名字，可以使用以下命令：
```bash
awk '{ print $1 }' data.txt
```
输出将是：
```
Alice
Bob
Charlie
```

### 示例 2：计算年龄的总和
如果我们想计算所有人的年龄总和，可以使用：
```bash
awk '{ sum += $2 } END { print sum }' data.txt
```
输出将是：
```
90
```

## 提示
- 使用 `-F` 选项时，确保选择正确的字段分隔符，以便正确解析输入数据。
- 在处理大型文件时，可以使用 `awk` 的内置变量 `NR`（当前记录数）和 `NF`（当前记录的字段数）来进行更复杂的操作。
- 在脚本中使用 `BEGIN` 和 `END` 块可以在处理数据之前和之后执行特定的操作，例如初始化变量或打印总结信息。

通过掌握 `awk`，您可以高效地处理和分析文本数据，极大地提高工作效率。