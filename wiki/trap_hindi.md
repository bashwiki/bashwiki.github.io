# [리눅스] Bash trap 사용법

## Overview
`trap` एक Bash कमांड है जिसका उपयोग स्क्रिप्ट के भीतर सिग्नल और अन्य घटनाओं को संभालने के लिए किया जाता है। जब कोई विशेष सिग्नल प्राप्त होता है, तो `trap` कमांड एक निर्दिष्ट कमांड या फ़ंक्शन को निष्पादित करता है। इसका मुख्य उद्देश्य स्क्रिप्ट को सुरक्षित और नियंत्रित तरीके से समाप्त करना है, विशेष रूप से जब उपयोगकर्ता स्क्रिप्ट को रोकने या किसी त्रुटि का सामना करने की कोशिश करता है।

## Usage
`trap` कमांड का मूल सिंटैक्स निम्नलिखित है:

```bash
trap COMMAND SIGNAL
```

यहाँ `COMMAND` वह कमांड है जिसे आप सिग्नल प्राप्त होने पर चलाना चाहते हैं, और `SIGNAL` वह सिग्नल है जिसे आप पकड़ना चाहते हैं। कुछ सामान्य सिग्नल में शामिल हैं:

- `SIGINT` (इंटरप्ट सिग्नल, आमतौर पर Ctrl+C द्वारा भेजा जाता है)
- `SIGTERM` (प्रक्रिया समाप्त करने के लिए)
- `EXIT` (स्क्रिप्ट के समाप्त होने पर)

## Examples
### उदाहरण 1: SIGINT सिग्नल को पकड़ना
```bash
#!/bin/bash

trap 'echo "Script interrupted"; exit' SIGINT

while true; do
    echo "Running... Press Ctrl+C to stop."
    sleep 1
done
```
इस उदाहरण में, जब उपयोगकर्ता Ctrl+C दबाता है, तो "Script interrupted" संदेश प्रदर्शित होगा और स्क्रिप्ट समाप्त हो जाएगी।

### उदाहरण 2: EXIT सिग्नल का उपयोग
```bash
#!/bin/bash

trap 'echo "Script is exiting"; cleanup_function' EXIT

cleanup_function() {
    echo "Cleaning up..."
}

echo "Running script..."
sleep 5
```
इस स्क्रिप्ट में, जब स्क्रिप्ट समाप्त होती है, तो "Script is exiting" और "Cleaning up..." संदेश प्रदर्शित होंगे।

## Tips
- `trap` का उपयोग करते समय, यह सुनिश्चित करें कि आप सभी संभावित सिग्नल को संभालने के लिए उचित कमांड निर्दिष्ट करें।
- स्क्रिप्ट में `trap` का उपयोग करते समय, हमेशा एक साफ़ और स्पष्ट संदेश प्रदान करें ताकि उपयोगकर्ता को पता चले कि क्या हो रहा है।
- `trap` को स्क्रिप्ट के अंत में या महत्वपूर्ण कार्यों के आसपास रखें ताकि आप सुनिश्चित कर सकें कि सभी आवश्यक कार्य किए जा रहे हैं।