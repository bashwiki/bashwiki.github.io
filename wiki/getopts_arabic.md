# [리눅스] Bash getopts 사용법

## نظرة عامة
يُستخدم الأمر `getopts` في Bash لتحليل خيارات سطر الأوامر. يتيح للمطورين والمهندسين معالجة الخيارات المعطاة للبرنامج بطريقة منظمة وسهلة. يمكن استخدامه لتحديد الخيارات القصيرة والطويلة، مما يسهل على المستخدمين تخصيص سلوك البرنامج عند التنفيذ.

## الاستخدام
الصيغة الأساسية لاستخدام `getopts` هي كما يلي:

```bash
getopts "options" variable
```

- **options**: سلسلة من الأحرف التي تمثل الخيارات المتاحة. إذا كان الخيار يتطلب قيمة، يتم وضع نقطتين (:) بعده.
- **variable**: اسم المتغير الذي سيتم تخزين الخيار الحالي فيه.

### خيارات شائعة
- `:`: إذا تم وضعه في بداية سلسلة الخيارات، سيؤدي ذلك إلى تفعيل وضع الخطأ، حيث سيتم إرجاع رمز الخطأ عند وجود خيار غير صحيح.
- `?`: يستخدم للإبلاغ عن خيار غير معروف.

## أمثلة
### مثال 1: خيارات بسيطة
```bash
#!/bin/bash

while getopts "ab:c:" opt; do
  case $opt in
    a)
      echo "خيار a مفعل"
      ;;
    b)
      echo "خيار b مع القيمة: $OPTARG"
      ;;
    c)
      echo "خيار c مع القيمة: $OPTARG"
      ;;
    *)
      echo "خيار غير معروف"
      ;;
  esac
done
```
في هذا المثال، يتم تحليل الخيارات `-a` و `-b` و `-c`، حيث يتطلب الخيار `-b` و `-c` قيمة.

### مثال 2: استخدام الخيار غير المعروف
```bash
#!/bin/bash

while getopts ":ab:" opt; do
  case $opt in
    a)
      echo "خيار a مفعل"
      ;;
    b)
      echo "خيار b مع القيمة: $OPTARG"
      ;;
    \?)
      echo "خيار غير معروف: -$OPTARG" >&2
      ;;
  esac
done
```
في هذا المثال، يتم التعامل مع الخيار غير المعروف وإظهار رسالة خطأ.

## نصائح
- تأكد من استخدام `OPTARG` للحصول على القيمة المرتبطة بالخيار الذي يتطلب قيمة.
- استخدم `:` في بداية سلسلة الخيارات لتفعيل وضع الخطأ، مما يساعد في معالجة الأخطاء بشكل أفضل.
- من الجيد دائمًا توثيق الخيارات المتاحة في برنامجك لمساعدة المستخدمين على فهم كيفية استخدامها بشكل صحيح.
- يمكن دمج `getopts` مع خيارات أخرى في Bash للحصول على سلوك أكثر تعقيدًا إذا لزم الأمر.