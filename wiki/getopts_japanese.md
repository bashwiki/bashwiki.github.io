# [리눅스] Bash getopts 사용법

## 概要
`getopts`は、Bashスクリプト内でコマンドラインオプションを解析するための組み込みコマンドです。主に、スクリプトに引数を渡す際に、オプションやフラグを簡単に処理するために使用されます。これにより、ユーザーはスクリプトを実行する際に、さまざまな設定を指定できるようになります。

## 使用法
`getopts`の基本的な構文は以下の通りです。

```bash
getopts "オプション文字列" 変数名
```

- **オプション文字列**: 受け入れるオプションを指定します。各オプションは1文字で表され、オプションが引数を必要とする場合は、その文字の後にコロン（`:`）を付けます。
- **変数名**: 現在処理中のオプションを格納するための変数名を指定します。

### 一般的なオプション
- `-a`: オプション`a`を指定します。
- `-b <引数>`: オプション`b`を指定し、引数を必要とします。

## 例
以下に、`getopts`を使用した簡単なスクリプトの例を示します。

### 例1: 基本的なオプションの処理
```bash
#!/bin/bash

while getopts "ab:" opt; do
  case $opt in
    a)
      echo "オプション -a が指定されました"
      ;;
    b)
      echo "オプション -b が指定され、引数は $OPTARG です"
      ;;
    *)
      echo "無効なオプション"
      ;;
  esac
done
```
このスクリプトは、`-a`オプションが指定された場合にメッセージを表示し、`-b`オプションが指定された場合にはその引数を表示します。

### 例2: 複数オプションの処理
```bash
#!/bin/bash

while getopts "x:y:z" opt; do
  case $opt in
    x)
      echo "オプション -x が指定され、引数は $OPTARG です"
      ;;
    y)
      echo "オプション -y が指定され、引数は $OPTARG です"
      ;;
    z)
      echo "オプション -z が指定されました"
      ;;
    *)
      echo "無効なオプション"
      ;;
  esac
done
```
このスクリプトは、`-x`および`-y`オプションに引数を指定でき、`-z`オプションは引数なしで使用できます。

## ヒント
- `getopts`は、オプションの順序を気にせずに処理できるため、ユーザーにとって使いやすいインターフェースを提供します。
- スクリプト内で`OPTIND`変数を使用して、次に処理すべき引数のインデックスを管理することができます。
- 複雑なオプション解析が必要な場合は、`getopt`コマンドを検討することもできますが、`getopts`はシンプルなケースに適しています。

`getopts`を使用することで、Bashスクリプト内でのオプション処理が簡素化され、より柔軟なスクリプトを作成することができます。