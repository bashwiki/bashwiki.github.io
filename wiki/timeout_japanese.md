# [리눅스] Bash timeout 사용법

## 概要
`timeout` コマンドは、指定した時間内に完了しないプロセスを強制的に終了させるためのツールです。このコマンドは、長時間実行される可能性のあるスクリプトやコマンドを制御するのに役立ちます。特に、無限ループやハングアップしたプロセスを防ぐために使用されます。

## 使用法
`timeout` コマンドの基本的な構文は以下の通りです。

```bash
timeout [オプション] 時間 コマンド [引数...]
```

### 主なオプション
- `時間`: プロセスが実行される最大時間を指定します。形式は `NUM[s|m|h|d]` で、秒（s）、分（m）、時間（h）、日（d）を指定できます。
- `-k`, `--kill-after=時間`: 指定した時間が経過した後にプロセスを強制終了する前に、優雅に終了するための猶予時間を設定します。
- `-s`, `--signal=SIGNAL`: プロセスに送信するシグナルを指定します。デフォルトは `TERM` です。

## 例
以下に、`timeout` コマンドの実用的な例を示します。

### 例1: コマンドを10秒でタイムアウト
```bash
timeout 10s sleep 30
```
このコマンドは、`sleep 30` を実行しますが、10秒後に強制終了されます。

### 例2: 優雅に終了するための猶予を設定
```bash
timeout -k 5s 10s sleep 30
```
このコマンドは、`sleep 30` を10秒後に終了し、さらに5秒間の猶予を与えます。もしプロセスが終了しない場合、強制的に終了します。

## ヒント
- `timeout` コマンドは、スクリプト内でのエラーハンドリングに役立ちます。特に、外部コマンドが応答しない場合に備えて使用すると良いでしょう。
- タイムアウトの時間は、実行するコマンドの特性に応じて調整してください。短すぎると、正常に完了するプロセスも強制終了される可能性があります。
- `timeout` コマンドを使用する際は、シグナルの扱いに注意し、必要に応じて適切なシグナルを指定してください。