# [리눅스] Bash trap 사용법

## Overview
`trap` 명령어는 Bash 스크립트에서 특정 신호나 이벤트가 발생했을 때 실행할 명령을 지정하는 데 사용됩니다. 주로 스크립트가 종료되거나 중단될 때 클린업 작업을 수행하거나, 오류를 처리하기 위한 용도로 활용됩니다. 이를 통해 스크립트의 안정성을 높이고, 예기치 않은 종료 상황에서도 필요한 작업을 수행할 수 있습니다.

## Usage
`trap` 명령어의 기본 구문은 다음과 같습니다:

```bash
trap COMMAND SIGNAL
```

- `COMMAND`: 신호가 발생했을 때 실행할 명령어입니다. 여러 개의 명령어를 세미콜론으로 구분하여 지정할 수 있습니다.
- `SIGNAL`: `trap`이 감지할 신호입니다. 예를 들어, `SIGINT`, `SIGTERM`, `EXIT` 등이 있습니다.

일반적으로 사용되는 신호는 다음과 같습니다:
- `SIGINT`: 사용자가 Ctrl+C를 눌렀을 때 발생합니다.
- `SIGTERM`: 프로세스 종료 요청을 나타냅니다.
- `EXIT`: 스크립트가 종료될 때 발생합니다.

## Examples

### 예제 1: SIGINT 신호 처리
다음은 사용자가 Ctrl+C를 눌렀을 때 메시지를 출력하고 스크립트를 종료하는 예제입니다.

```bash
#!/bin/bash

trap 'echo "스크립트가 중단되었습니다.";' SIGINT

while true; do
    echo "스크립트 실행 중... (Ctrl+C로 중단 가능)"
    sleep 1
done
```

### 예제 2: EXIT 신호 처리
스크립트가 종료될 때 클린업 작업을 수행하는 예제입니다.

```bash
#!/bin/bash

trap 'echo "스크립트가 종료됩니다. 클린업 중..."; rm -f temp_file;' EXIT

touch temp_file
echo "임시 파일이 생성되었습니다."

# 스크립트의 나머지 작업 수행
sleep 5
echo "작업 완료."
```

## Tips
- `trap`을 사용할 때는 신호를 적절히 선택하여 필요한 작업만 수행하도록 하는 것이 좋습니다.
- 여러 신호를 동시에 처리할 수 있으므로, 필요에 따라 여러 개의 `trap` 명령어를 설정할 수 있습니다.
- `trap` 명령어는 스크립트의 시작 부분에 배치하는 것이 일반적이며, 이를 통해 스크립트의 모든 부분에서 신호를 감지할 수 있습니다.
- 복잡한 스크립트에서는 `trap`을 사용하여 예외 처리를 체계적으로 관리하는 것이 좋습니다.