# [리눅스] Bash mapfile 사용법

## 概述
`mapfile` 是一个 Bash 内置命令，用于从标准输入读取数据并将其存储到数组中。它的主要目的是简化从文件或其他输入流读取多行文本的过程，使得每一行都成为数组中的一个元素。这在处理文本数据时非常有用，尤其是在需要逐行处理数据的场景下。

## 用法
`mapfile` 的基本语法如下：

```bash
mapfile [-n N] [-s S] [-t] [-O N] [array]
```

### 常用选项：
- `-n N`：指定读取的行数，最多读取 N 行。
- `-s S`：跳过前 S 行。
- `-t`：去掉每行末尾的换行符。
- `-O N`：指定数组的起始索引，默认从 0 开始。

如果不指定数组名称，`mapfile` 将默认将数据存储到 `MAPFILE` 数组中。

## 示例
### 示例 1：从文件读取数据
假设我们有一个名为 `data.txt` 的文件，其内容如下：

```
第一行
第二行
第三行
```

我们可以使用 `mapfile` 将文件的每一行读取到一个数组中：

```bash
mapfile lines < data.txt
echo "${lines[0]}"  # 输出：第一行
echo "${lines[1]}"  # 输出：第二行
```

### 示例 2：从命令输出读取数据
我们还可以从命令的输出中读取数据，例如使用 `ls` 命令：

```bash
mapfile files < <(ls)
echo "文件列表："
for file in "${files[@]}"; do
    echo "$file"
done
```

## 提示
- 使用 `-t` 选项可以避免在数组元素中出现多余的换行符，这在处理文本数据时非常重要。
- `mapfile` 适合用于处理较小的文本数据集，对于非常大的数据集，考虑使用其他工具（如 `awk` 或 `sed`）可能更为高效。
- 通过结合使用 `-n` 和 `-s` 选项，可以灵活地控制读取的行数和跳过的行数，以满足特定需求。

通过掌握 `mapfile` 命令，您可以更高效地处理 Bash 脚本中的多行文本数据。