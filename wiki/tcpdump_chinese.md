# [리눅스] Bash tcpdump 사용법

## 概述
`tcpdump` 是一个强大的命令行工具，用于捕获和分析网络流量。它可以帮助工程师和开发人员监控网络数据包，诊断网络问题，以及进行安全分析。通过使用 `tcpdump`，用户可以实时查看通过网络接口传输的数据包，并根据需要进行过滤和保存。

## 用法
`tcpdump` 的基本语法如下：
```
tcpdump [选项] [表达式]
```
- **选项**：用于指定捕获数据包的方式，例如：
  - `-i <interface>`：指定要监听的网络接口（如 eth0）。
  - `-n`：不解析主机名，直接显示 IP 地址。
  - `-w <file>`：将捕获的数据包写入文件。
  - `-r <file>`：从文件中读取数据包进行分析。
  - `-c <count>`：捕获指定数量的数据包后停止。

- **表达式**：用于过滤捕获的数据包，例如：
  - `host <hostname>`：捕获与特定主机相关的数据包。
  - `port <port>`：捕获与特定端口相关的数据包。

## 示例
以下是两个使用 `tcpdump` 的实际示例：

1. 捕获所有通过 `eth0` 接口的 HTTP 流量：
   ```bash
   tcpdump -i eth0 -n port 80
   ```

2. 将捕获的前 100 个数据包保存到文件 `capture.pcap` 中：
   ```bash
   tcpdump -i eth0 -c 100 -w capture.pcap
   ```

## 提示
- 在使用 `tcpdump` 时，确保你有足够的权限，通常需要以 root 用户身份运行。
- 使用 `-n` 选项可以加快捕获速度，因为它避免了 DNS 查询。
- 捕获大量数据包时，考虑使用 `-c` 选项来限制捕获数量，以避免生成过大的数据文件。
- 定期检查捕获的数据包文件，确保它们不会占用过多的磁盘空间。
- 使用 `-r` 选项可以方便地分析之前捕获的数据包，结合其他工具（如 Wireshark）可以获得更直观的结果。