# [리눅스] Bash iptables 사용법

## 概述
`iptables` 是一个用于配置 Linux 内核防火墙的命令行工具。它允许用户设置、维护和检查 IP 数据包过滤规则。`iptables` 的主要目的是控制进出网络流量，确保系统的安全性，并防止未授权的访问。

## 用法
`iptables` 的基本语法如下：
```
iptables [选项] [链] [匹配条件] [动作]
```
- **选项**：用于指定操作的选项，如 `-A`（添加规则）、`-D`（删除规则）、`-L`（列出规则）等。
- **链**：规则应用的链，例如 `INPUT`（入站流量）、`OUTPUT`（出站流量）、`FORWARD`（转发流量）。
- **匹配条件**：用于匹配特定条件的参数，例如源地址、目标地址、协议等。
- **动作**：在匹配条件满足时执行的操作，如 `ACCEPT`（接受）、`DROP`（丢弃）、`REJECT`（拒绝）。

常见选项示例：
- `-A`：在指定链的末尾添加新规则。
- `-D`：删除指定链中的规则。
- `-L`：列出指定链中的所有规则。

## 示例
以下是两个使用 `iptables` 的实际示例：

1. **允许 SSH 访问**
   ```
   iptables -A INPUT -p tcp --dport 22 -j ACCEPT
   ```
   这个命令将允许所有入站的 TCP 流量通过端口 22（SSH）。

2. **阻止特定 IP 地址**
   ```
   iptables -A INPUT -s 192.168.1.100 -j DROP
   ```
   这个命令将阻止来自 IP 地址 192.168.1.100 的所有入站流量。

## 提示
- 在修改 `iptables` 规则之前，建议备份当前的规则配置，以防止意外丢失。
- 使用 `iptables -L -v` 可以查看详细的规则列表，包括匹配的包和字节数。
- 定期审查和更新防火墙规则，以确保其符合当前的安全需求。
- 考虑使用 `iptables-save` 和 `iptables-restore` 命令来保存和恢复规则配置。