# [리눅스] Bash getopts 사용법

## Overview
`getopts`는 Bash 스크립트에서 명령줄 옵션을 처리하기 위해 사용되는 내장 명령입니다. 이 명령은 스크립트에 전달된 옵션과 인수를 쉽게 파싱할 수 있도록 도와줍니다. `getopts`는 주로 스크립트의 사용자 정의 옵션을 처리하는 데 유용하며, 옵션의 유효성을 검사하고, 필요에 따라 인수를 수집하는 기능을 제공합니다.

## Usage
`getopts`의 기본 구문은 다음과 같습니다:

```bash
getopts "옵션 문자열" 변수명
```

- **옵션 문자열**: 처리할 수 있는 옵션을 정의합니다. 각 옵션은 단일 문자로 표현되며, 옵션 뒤에 콜론(:)이 붙으면 해당 옵션이 인수를 필요로 함을 나타냅니다.
- **변수명**: `getopts`가 현재 처리 중인 옵션을 저장할 변수입니다.

### 예시
옵션 문자열이 `abc:`인 경우:
- `a`, `b`는 인수를 필요로 하지 않는 옵션입니다.
- `c:`는 인수를 필요로 하는 옵션입니다.

## Examples
### 예제 1: 기본 사용법
다음은 `getopts`를 사용하여 간단한 옵션을 처리하는 스크립트의 예입니다.

```bash
#!/bin/bash

while getopts "ab:c:" opt; do
  case $opt in
    a)
      echo "옵션 A가 선택되었습니다."
      ;;
    b)
      echo "옵션 B가 선택되었습니다. 인수: $OPTARG"
      ;;
    c)
      echo "옵션 C가 선택되었습니다. 인수: $OPTARG"
      ;;
    *)
      echo "유효하지 않은 옵션입니다."
      ;;
  esac
done
```

이 스크립트를 `./script.sh -a -b value -c another_value`와 같이 실행하면 다음과 같은 출력이 생성됩니다:
```
옵션 A가 선택되었습니다.
옵션 B가 선택되었습니다. 인수: value
옵션 C가 선택되었습니다. 인수: another_value
```

### 예제 2: 인수 없는 옵션
인수가 필요 없는 옵션을 처리하는 간단한 예제입니다.

```bash
#!/bin/bash

while getopts "x:y" opt; do
  case $opt in
    x)
      echo "옵션 X가 선택되었습니다. 인수: $OPTARG"
      ;;
    y)
      echo "옵션 Y가 선택되었습니다."
      ;;
    *)
      echo "유효하지 않은 옵션입니다."
      ;;
  esac
done
```

이 스크립트를 `./script.sh -x value -y`와 같이 실행하면 다음과 같은 출력이 생성됩니다:
```
옵션 X가 선택되었습니다. 인수: value
옵션 Y가 선택되었습니다.
```

## Tips
- `getopts`는 옵션을 처리할 때 자동으로 인덱스를 관리하므로, 스크립트에서 처리된 옵션의 위치를 쉽게 추적할 수 있습니다.
- 옵션 문자열에 콜론(:)을 사용하여 인수를 요구하는 옵션을 명확히 정의하세요. 이를 통해 사용자에게 필요한 인수를 제공하도록 유도할 수 있습니다.
- `OPTARG` 변수를 사용하여 현재 옵션의 인수를 쉽게 참조할 수 있습니다.
- 스크립트의 가독성을 높이기 위해 각 옵션에 대한 설명을 주석으로 추가하는 것이 좋습니다.