# [리눅스] Bash iptables 사용법

## Обзор
`iptables` — это утилита командной строки для настройки и управления таблицами правил фильтрации пакетов в ядре Linux. Она позволяет администраторам настраивать правила для обработки входящего, исходящего и перенаправленного трафика, что делает её важным инструментом для обеспечения сетевой безопасности и управления трафиком.

## Использование
Основной синтаксис команды `iptables` выглядит следующим образом:

```bash
iptables [опции] [цепочка] [условия] [действие]
```

### Общие опции:
- `-A` — добавляет правило в конец указанной цепочки.
- `-D` — удаляет правило из цепочки.
- `-I` — вставляет правило в начало цепочки.
- `-L` — выводит список правил в цепочке.
- `-F` — очищает цепочку от всех правил.
- `-P` — устанавливает политику по умолчанию для цепочки.

## Примеры
### Пример 1: Разрешение входящего трафика на порт 80
Чтобы разрешить входящий HTTP-трафик на порт 80, выполните следующую команду:

```bash
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
```

### Пример 2: Блокировка доступа с определенного IP-адреса
Чтобы заблокировать доступ с IP-адреса 192.168.1.100, используйте следующую команду:

```bash
iptables -A INPUT -s 192.168.1.100 -j DROP
```

## Советы
- Регулярно проверяйте и сохраняйте конфигурацию правил `iptables`, чтобы избежать потери настроек после перезагрузки системы.
- Используйте опцию `-L -n -v` для получения более детальной информации о текущих правилах, включая количество пакетов и байтов, соответствующих каждому правилу.
- Будьте осторожны с правилами, которые могут блокировать ваш доступ к серверу. Рекомендуется сначала тестировать правила на тестовом сервере или использовать SSH-сессии с возможностью восстановления соединения.
- Рассмотрите возможность использования `iptables-save` и `iptables-restore` для управления конфигурацией правил в виде файлов.