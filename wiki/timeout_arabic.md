# [리눅스] Bash timeout 사용법

## نظرة عامة
أمر `timeout` في Bash يُستخدم لتحديد مدة زمنية معينة يُسمح فيها لعملية معينة بالتنفيذ. إذا لم تكتمل العملية في الوقت المحدد، يقوم الأمر بإنهاءها تلقائيًا. هذا الأمر مفيد بشكل خاص في السيناريوهات التي تحتاج فيها إلى التحكم في وقت تنفيذ الأوامر أو البرامج، مما يساعد على تجنب العمليات العالقة أو التي تستغرق وقتًا طويلاً.

## الاستخدام
الصيغة الأساسية لأمر `timeout` هي:

```bash
timeout [خيار] المدة الزمنية الأمر [المعلمات]
```

### الخيارات الشائعة:
- `-s, --signal SIGNAL`: تحديد إشارة لإنهاء العملية (الإشارة الافتراضية هي `SIGTERM`).
- `--preserve-status`: يحتفظ بحالة الخروج للعملية الأصلية.
- `-k, --kill-after=DURATION`: تحديد مدة زمنية بعد انتهاء المدة المحددة، حيث يتم إرسال إشارة لإنهاء العملية إذا لم تنتهِ.

## أمثلة
### مثال 1: إنهاء عملية بعد 10 ثوانٍ
```bash
timeout 10s sleep 30
```
في هذا المثال، سيتم تنفيذ الأمر `sleep 30`، ولكن سيتم إنهاؤه بعد 10 ثوانٍ، مما يعني أن العملية ستتوقف قبل أن تكتمل.

### مثال 2: استخدام إشارة مختلفة
```bash
timeout -s SIGKILL 5s ping google.com
```
هنا، سيتم تنفيذ الأمر `ping google.com` لمدة 5 ثوانٍ، وإذا لم ينتهِ، سيتم إنهاؤه باستخدام إشارة `SIGKILL`.

## نصائح
- تأكد من اختيار المدة الزمنية المناسبة لتجنب إنهاء العمليات المهمة بشكل غير متوقع.
- استخدم الخيار `--preserve-status` إذا كنت بحاجة إلى معرفة حالة الخروج للعملية الأصلية بعد إنهائها.
- تجنب استخدام `timeout` مع العمليات التي تحتاج إلى وقت طويل بشكل طبيعي، إلا إذا كنت متأكدًا من أن العملية قد تتعطل أو تستغرق وقتًا أطول من المتوقع.