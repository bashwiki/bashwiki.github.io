# [리눅스] Bash logrotate 사용법

## نظرة عامة
يعتبر الأمر `logrotate` أداة قوية لإدارة ملفات السجل (logs) في نظام التشغيل لينكس. يتمثل الغرض الرئيسي من `logrotate` في تسهيل إدارة ملفات السجل من خلال تدويرها، مما يعني أنه يمكن تقسيم السجلات القديمة إلى ملفات جديدة، مما يساعد في تقليل استهلاك المساحة وتسهيل إدارة البيانات. يمكن تكوين `logrotate` لتدوير السجلات بناءً على حجم الملف أو الوقت، مما يضمن عدم تجاوز السجلات لحجم معين أو عدم الاحتفاظ بها لفترة طويلة.

## الاستخدام
التركيب الأساسي للأمر `logrotate` هو كما يلي:

```bash
logrotate [خيارات] [ملف التكوين]
```

### الخيارات الشائعة:
- `-f`: فرض تدوير السجلات حتى لو لم يكن ذلك مطلوبًا.
- `-s`: تحديد ملف الحالة (state file) الذي يحتفظ بمعلومات حول السجلات التي تم تدويرها.
- `-v`: تفعيل وضع العرض (verbose mode) لعرض معلومات إضافية حول العملية.
- `-d`: تشغيل الأمر في وضع الاختبار (debug mode) دون إجراء أي تغييرات.

## أمثلة
### مثال 1: تدوير السجلات باستخدام ملف تكوين
لنفترض أن لديك ملف تكوين `logrotate.conf` يحتوي على إعدادات لتدوير السجلات. يمكنك تشغيل الأمر كالتالي:

```bash
logrotate -v /etc/logrotate.conf
```

هذا الأمر سيقوم بتدوير السجلات وفقًا للإعدادات الموجودة في ملف `logrotate.conf` مع عرض معلومات إضافية عن العملية.

### مثال 2: فرض تدوير السجلات
إذا كنت بحاجة إلى فرض تدوير السجلات، يمكنك استخدام الخيار `-f` كما يلي:

```bash
logrotate -f /etc/logrotate.conf
```

هذا الأمر سيجبر `logrotate` على تدوير السجلات حتى لو لم يكن ذلك مطلوبًا وفقًا للإعدادات.

## نصائح
- تأكد من مراجعة ملف التكوين الخاص بـ `logrotate` بانتظام لضمان أنه يتناسب مع احتياجاتك الحالية.
- استخدم الخيار `-d` لاختبار إعداداتك قبل تنفيذها فعليًا، لتجنب أي مشاكل غير متوقعة.
- قم بإعداد إشعارات أو سجلات لمراقبة عمليات التدوير، حتى تتمكن من معرفة ما إذا كانت هناك أي مشاكل تحدث.
- ضع في اعتبارك استخدام أدوات مثل `cron` لتجدولة عمليات `logrotate` بشكل دوري، مما يسهل إدارة السجلات بشكل تلقائي.