# [리눅스] Bash iptables 사용법

## نظرة عامة
أداة `iptables` هي أداة قوية تستخدم لإدارة جدار الحماية في نظام تشغيل لينكس. توفر `iptables` واجهة للتحكم في حركة المرور الشبكية، مما يسمح للمستخدمين بإنشاء قواعد لتصفية الحزم، وتحديد ما إذا كانت الحزم يجب أن تُقبل أو تُرفض أو تُعاد توجيهها. الهدف الرئيسي من `iptables` هو تعزيز أمان النظام من خلال التحكم في حركة المرور الواردة والصادرة.

## الاستخدام
الصيغة الأساسية لأمر `iptables` هي:

```bash
iptables [خيار] [سلسلة] [قواعد]
```

### الخيارات الشائعة:
- `-A` : لإضافة قاعدة إلى نهاية سلسلة.
- `-D` : لحذف قاعدة من سلسلة.
- `-I` : لإدراج قاعدة في بداية سلسلة.
- `-L` : لعرض القواعد الحالية في سلسلة.
- `-F` : لمسح جميع القواعد في سلسلة.
- `-P` : لتعيين سياسة افتراضية لسلسلة (قبول أو رفض).

## أمثلة
### مثال 1: عرض القواعد الحالية
لعرض جميع القواعد الموجودة في جدار الحماية، يمكنك استخدام الأمر التالي:

```bash
iptables -L -v
```

### مثال 2: إضافة قاعدة للسماح بحركة المرور على منفذ 80 (HTTP)
للسماح بحركة المرور الواردة على منفذ 80، يمكنك استخدام الأمر:

```bash
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
```

## نصائح
- تأكد من حفظ القواعد بعد تعديلها، حيث قد يتم فقدان التغييرات عند إعادة تشغيل النظام. يمكنك استخدام أدوات مثل `iptables-save` و `iptables-restore` لحفظ واستعادة القواعد.
- استخدم `-n` مع الأمر `iptables -L` لتجنب تحويل عناوين IP إلى أسماء مضيفين، مما يجعل العرض أسرع.
- اختبر القواعد الجديدة في بيئة آمنة قبل تطبيقها على الأنظمة الحية لتفادي أي انقطاع غير متوقع في الخدمة.