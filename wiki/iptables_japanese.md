# [리눅스] Bash iptables 사용법

## 概要
`iptables`は、Linuxオペレーティングシステムにおけるパケットフィルタリングとネットワークアドレス変換（NAT）を管理するためのコマンドです。主にファイアウォールの設定に使用され、ネットワークトラフィックの制御やセキュリティポリシーの適用を行います。`iptables`を使用することで、特定のトラフィックを許可または拒否し、システムを保護することができます。

## 使用法
`iptables`の基本的な構文は以下の通りです。

```bash
iptables [チェーン] [アクション] [オプション]
```

- **チェーン**: `INPUT`, `OUTPUT`, `FORWARD`など、パケットが通過するルートを指定します。
- **アクション**: `-A`（追加）、`-D`（削除）、`-L`（リスト表示）など、実行する操作を指定します。
- **オプション**: 特定の条件やルールを指定するための追加オプションです。

### 一般的なオプション
- `-p`: プロトコル（tcp, udp, icmpなど）を指定します。
- `--dport`: 宛先ポートを指定します。
- `--sport`: 送信元ポートを指定します。
- `-s`: 送信元IPアドレスを指定します。
- `-d`: 宛先IPアドレスを指定します。

## 例
以下に、`iptables`の実用的な例を示します。

### 例1: 特定のIPアドレスからの接続を拒否する
```bash
iptables -A INPUT -s 192.168.1.100 -j DROP
```
このコマンドは、IPアドレス`192.168.1.100`からのすべての接続を拒否します。

### 例2: 特定のポートへのアクセスを許可する
```bash
iptables -A INPUT -p tcp --dport 80 -j ACCEPT
```
このコマンドは、TCPプロトコルを使用してポート80（HTTP）へのアクセスを許可します。

## ヒント
- `iptables`の設定を変更する前に、現在のルールをバックアップすることをお勧めします。以下のコマンドでルールを保存できます。
  ```bash
  iptables-save > /path/to/backupfile
  ```
- ルールを適用した後は、`iptables -L`コマンドを使用して、現在のルールを確認し、正しく設定されているかを確認してください。
- `iptables`は非常に強力なツールですが、誤った設定を行うとネットワーク接続が失われる可能性があるため、慎重に操作してください。