# [리눅스] Bash mpstat 사용법

## 개요
`mpstat` 명령어는 시스템의 CPU 사용량을 모니터링하고 보고하는 도구입니다. 이 명령어는 여러 CPU 코어의 성능을 개별적으로 분석할 수 있도록 하여, 시스템의 병목 현상을 파악하고 성능 최적화를 위한 정보를 제공합니다. `mpstat`는 주로 시스템 성능 분석 및 문제 해결을 위해 사용됩니다.

## 사용법
`mpstat`의 기본 구문은 다음과 같습니다:

```bash
mpstat [옵션] [간격] [횟수]
```

- **옵션**: 추가적인 기능을 제공하는 다양한 플래그입니다.
- **간격**: CPU 통계를 업데이트할 시간 간격(초)입니다.
- **횟수**: 통계를 수집할 횟수입니다.

### 일반적인 옵션
- `-P ALL`: 모든 CPU의 통계를 표시합니다.
- `-u`: CPU 사용률을 표시합니다.
- `-h`: 사람이 읽기 쉬운 형식으로 출력합니다.

## 예제
1. 모든 CPU의 사용률을 2초 간격으로 5회 출력하는 예제:

```bash
mpstat -P ALL 2 5
```

이 명령어는 각 CPU의 사용률을 2초 간격으로 5번 출력합니다.

2. CPU 사용률을 사람이 읽기 쉬운 형식으로 출력하는 예제:

```bash
mpstat -u -h 1 3
```

이 명령어는 CPU 사용률을 1초 간격으로 3번 출력하며, 결과는 사람이 읽기 쉬운 형식으로 표시됩니다.

## 팁
- `mpstat`를 사용할 때, `-P ALL` 옵션을 사용하여 모든 CPU의 성능을 동시에 모니터링하는 것이 좋습니다. 이는 멀티코어 시스템에서의 성능 문제를 진단하는 데 유용합니다.
- 성능 문제를 해결하기 위해 `mpstat`의 출력을 다른 성능 모니터링 도구와 함께 사용하는 것이 좋습니다. 예를 들어, `iostat`와 `vmstat`와 함께 사용하면 시스템의 전반적인 성능을 더 잘 이해할 수 있습니다.
- 주기적으로 `mpstat`를 실행하여 CPU 사용 패턴을 기록하면, 시스템 성능을 최적화하는 데 도움이 됩니다.