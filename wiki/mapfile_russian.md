# [리눅스] Bash mapfile 사용법

## Обзор
Команда `mapfile` в Bash используется для чтения строк из стандартного ввода и сохранения их в массив. Это позволяет удобно обрабатывать данные, полученные из файлов или других команд, и хранить их в виде массива для дальнейшего использования в скриптах. `mapfile` особенно полезен для работы с большими объемами данных, когда необходимо сохранить каждую строку в отдельный элемент массива.

## Использование
Основной синтаксис команды `mapfile` выглядит следующим образом:

```bash
mapfile [опции] [имя_массива]
```

### Общие опции:
- `-t`: Удаляет символы новой строки из каждой строки, сохраняемой в массив.
- `-n N`: Читает только первые N строк.
- `-O N`: Указывает индекс, с которого начинать запись в массив (по умолчанию 0).
- `-s N`: Пропускает первые N строк ввода.

## Примеры

### Пример 1: Чтение строк из файла
```bash
mapfile -t lines < файл.txt
echo "${lines[@]}"
```
В этом примере команда `mapfile` считывает все строки из `файл.txt` и сохраняет их в массив `lines`. Опция `-t` удаляет символы новой строки. Затем мы выводим все элементы массива.

### Пример 2: Чтение первых 3 строк из вывода команды
```bash
mapfile -t first_three < <(head -n 3 файл.txt)
echo "${first_three[@]}"
```
В этом примере мы используем `mapfile` для чтения первых трех строк из `файл.txt`, используя команду `head`. Результат сохраняется в массив `first_three`, который затем выводится.

## Советы
- Используйте опцию `-t`, чтобы избежать лишних символов новой строки в ваших данных.
- Если вы работаете с большими файлами, рассмотрите возможность использования опции `-n`, чтобы ограничить количество считываемых строк и сэкономить память.
- Помните, что массивы в Bash индексируются с нуля, поэтому при использовании опции `-O` будьте внимательны с начальным индексом.
- `mapfile` может быть особенно полезен в скриптах для обработки данных, полученных из различных источников, таких как файлы, команды или даже сетевые запросы.