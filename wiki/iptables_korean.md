# [리눅스] Bash iptables 사용법

## Overview
`iptables`는 리눅스 커널의 방화벽 기능을 제어하는 데 사용되는 명령어입니다. 이 명령어는 네트워크 패킷을 필터링하고, NAT(네트워크 주소 변환), 패킷 로깅, 그리고 트래픽 제어를 수행하는 데 사용됩니다. `iptables`는 보안 정책을 설정하여 시스템을 보호하고, 네트워크 트래픽을 관리하는 데 중요한 역할을 합니다.

## Usage
`iptables`의 기본 구문은 다음과 같습니다:

```bash
iptables [옵션] [체인] [규칙]
```

여기서 주요 옵션은 다음과 같습니다:

- `-A`, `--append`: 지정한 체인에 규칙을 추가합니다.
- `-D`, `--delete`: 지정한 체인에서 규칙을 삭제합니다.
- `-L`, `--list`: 현재 설정된 규칙을 나열합니다.
- `-F`, `--flush`: 지정한 체인의 모든 규칙을 삭제합니다.
- `-P`, `--policy`: 체인의 기본 정책을 설정합니다.

## Examples
### 예제 1: 기본 규칙 추가
특정 IP 주소에서 오는 트래픽을 허용하는 규칙을 추가하는 방법입니다.

```bash
iptables -A INPUT -s 192.168.1.100 -j ACCEPT
```

이 명령어는 `INPUT` 체인에 192.168.1.100에서 오는 모든 트래픽을 허용하는 규칙을 추가합니다.

### 예제 2: 규칙 나열
현재 설정된 모든 규칙을 확인하는 방법입니다.

```bash
iptables -L -n -v
```

이 명령어는 현재의 모든 체인과 규칙을 나열하며, `-n` 옵션은 DNS 조회를 하지 않고 IP 주소를 숫자로 표시합니다. `-v` 옵션은 패킷 및 바이트 카운트를 포함한 자세한 정보를 제공합니다.

## Tips
- `iptables` 규칙을 변경하기 전에 현재 규칙을 백업하는 것이 좋습니다. 다음 명령어로 규칙을 파일로 저장할 수 있습니다:

  ```bash
  iptables-save > /path/to/backup/file
  ```

- 규칙을 적용한 후에는 항상 `iptables -L` 명령어로 결과를 확인하여 규칙이 올바르게 설정되었는지 검토하세요.
- 복잡한 규칙을 설정할 때는 주석을 추가하여 각 규칙의 목적을 명확히 하는 것이 좋습니다. 주석은 `-m comment --comment "주석 내용"` 옵션을 사용하여 추가할 수 있습니다.