# [리눅스] Bash jq 사용법

## 概要
`jq`は、JSONデータを処理するための軽量で柔軟なコマンドラインツールです。主にJSONデータの解析、フィルタリング、変換を行うために使用され、スクリプトやデータパイプラインで非常に便利です。特に、APIから取得したJSONレスポンスを操作する際に役立ちます。

## 使用法
`jq`の基本的な構文は以下の通りです。

```bash
jq [オプション] 'フィルタ' [ファイル名]
```

### 一般的なオプション
- `-c`: コンパクトな出力を生成します。各オブジェクトを1行に表示します。
- `-r`: 生の出力を生成します。JSONエスケープを適用せず、文字列をそのまま出力します。
- `-f`: フィルタを含むファイルを指定します。

## 例
### 例1: JSONファイルから特定のフィールドを抽出する
以下のようなJSONファイル `data.json` があるとします。

```json
{
  "name": "Alice",
  "age": 30,
  "city": "Tokyo"
}
```

このファイルから`name`フィールドを抽出するには、次のコマンドを使用します。

```bash
jq '.name' data.json
```

出力は次のようになります。

```
"Alice"
```

### 例2: 配列のフィルタリング
次のようなJSON配列があるとします。

```json
[
  {"name": "Alice", "age": 30},
  {"name": "Bob", "age": 25},
  {"name": "Charlie", "age": 35}
]
```

この配列から`age`が30以上の人を抽出するには、次のコマンドを使用します。

```bash
jq '.[] | select(.age >= 30)' data.json
```

出力は次のようになります。

```json
{
  "name": "Alice",
  "age": 30
}
{
  "name": "Charlie",
  "age": 35
}
```

## ヒント
- `jq`はパイプラインと組み合わせて使用することができます。例えば、`curl`コマンドで取得したJSONデータを直接`jq`で処理することが可能です。
- 複雑なフィルタを作成する際は、`jq`の公式ドキュメントを参照することをお勧めします。多くの例や詳細な説明が提供されています。
- JSONデータの構造を理解するために、`jq`の出力を整形するオプション（`-C`や`-M`）を活用すると良いでしょう。