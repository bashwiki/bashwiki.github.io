# [리눅스] Bash logrotate 사용법

## 概要
`logrotate`は、LinuxおよびUnix系システムでログファイルを管理するためのツールです。主な目的は、ログファイルのサイズを制御し、古いログを圧縮、削除、またはアーカイブすることです。これにより、ディスクスペースを節約し、システムのパフォーマンスを向上させることができます。

## 使用法
`logrotate`の基本的な構文は以下の通りです。

```bash
logrotate [オプション] [設定ファイル]
```

### 一般的なオプション
- `-f` : 強制的にログローテーションを実行します。
- `-s` : 状態ファイルのパスを指定します。デフォルトでは`/var/lib/logrotate/status`が使用されます。
- `-v` : 詳細モードで実行し、処理内容を表示します。
- `-d` : 実行せずに何が行われるかを表示します（ドライラン）。

## 例
### 例1: デフォルト設定ファイルを使用してログローテーションを実行する
以下のコマンドは、デフォルトの設定ファイル（通常は`/etc/logrotate.conf`）に基づいてログローテーションを実行します。

```bash
sudo logrotate /etc/logrotate.conf
```

### 例2: 特定の設定ファイルを使用して強制的にログローテーションを実行する
特定の設定ファイルを指定し、強制的にログローテーションを実行する場合は、以下のコマンドを使用します。

```bash
sudo logrotate -f /etc/logrotate.d/myapp
```

## ヒント
- **設定ファイルの管理**: 各アプリケーションのログローテーション設定は、`/etc/logrotate.d/`ディレクトリ内に個別のファイルとして管理することが推奨されます。これにより、設定が整理され、管理が容易になります。
- **定期的な実行**: `logrotate`は通常、cronジョブとして定期的に実行されます。必要に応じて、設定ファイルを調整し、ローテーションの頻度を変更できます。
- **ログの圧縮**: ログファイルが大きくなる場合、圧縮オプションを使用して、ディスクスペースをさらに節約することができます。設定ファイル内で`compress`オプションを追加することで実現できます。

`logrotate`を適切に使用することで、システムのログ管理を効率化し、ディスクスペースの無駄を減らすことができます。