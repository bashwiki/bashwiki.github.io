# [리눅스] Bash wait 사용법

## نظرة عامة
أمر `wait` في Bash يُستخدم لإيقاف تنفيذ البرنامج حتى ينتهي أحد العمليات الفرعية (subprocesses) أو جميعها. يُعتبر هذا الأمر مفيدًا في السيناريوهات التي تتطلب الانتظار لإنهاء العمليات قبل المتابعة إلى الخطوة التالية في السكربت.

## الاستخدام
الصيغة الأساسية لأمر `wait` هي:

```bash
wait [PID...]
```

- **PID**: هو معرف العملية (Process ID) للعملية الفرعية التي تريد الانتظار لإنهائها. إذا لم يتم تحديد أي PID، سينتظر الأمر حتى تنتهي جميع العمليات الفرعية التي تم إنشاؤها في الجلسة الحالية.

## أمثلة
### مثال 1: الانتظار لإنهاء عملية فرعية واحدة
```bash
#!/bin/bash

sleep 5 &  # بدء عملية فرعية
pid=$!     # الحصول على PID للعملية الفرعية
echo "انتظر حتى تنتهي العملية الفرعية..."
wait $pid # الانتظار لإنهاء العملية الفرعية
echo "انتهت العملية!"
```
في هذا المثال، يتم بدء عملية `sleep` في الخلفية، ثم يتم استخدام `wait` للانتظار حتى تنتهي هذه العملية.

### مثال 2: الانتظار لإنهاء جميع العمليات الفرعية
```bash
#!/bin/bash

for i in {1..3}; do
    sleep $i &  # بدء عدة عمليات فرعية
done

echo "انتظر حتى تنتهي جميع العمليات الفرعية..."
wait  # الانتظار لإنهاء جميع العمليات الفرعية
echo "انتهت جميع العمليات!"
```
في هذا المثال، يتم بدء ثلاث عمليات `sleep` في الخلفية، ويتم استخدام `wait` بدون أي PID للانتظار حتى تنتهي جميع العمليات.

## نصائح
- تأكد من استخدام `wait` في سياقات حيث تحتاج إلى ضمان انتهاء العمليات الفرعية قبل المتابعة، مثل عند جمع النتائج أو تنفيذ عمليات تعتمد على نتائج سابقة.
- يمكنك استخدام `wait` مع متغيرات PID لتحديد أي عملية معينة تريد الانتظار لها، مما يوفر لك تحكمًا أكبر في تدفق السكربت.
- إذا كنت تستخدم `wait` في سكربتات معقدة، تأكد من التعامل مع الأخطاء بشكل مناسب، حيث قد تؤدي العمليات الفاشلة إلى سلوك غير متوقع.